<html lang="en">
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Configuration | Fin Example Repository Documentation</title>
<meta name="generator" content="Jekyll v4.0.0" />
<meta property="og:title" content="Configuration" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." />
<link rel="canonical" href="http://localhost:4000/fin-example-repository/configuration/" />
<meta property="og:url" content="http://localhost:4000/fin-example-repository/configuration/" />
<meta property="og:site_name" content="Fin Example Repository Documentation" />
<script type="application/ld+json">
{"@type":"WebPage","headline":"Configuration","url":"http://localhost:4000/fin-example-repository/configuration/","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<title>Configuration</title>
    <link rel="stylesheet" href="/fin-example-repository/assets/main.css">
    <link rel="stylesheet" href="/fin-example-repository/assets/css/styles.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/fin-example-repository/feed.xml" title="Fin Example Repository Documentation" /></head>
  <body><header class="site-header" role="banner">
  <div class="wrapper"><a class="site-title" rel="author" href="/fin-example-repository/">Fin Example Repository Documentation</a>

    <!--<nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/fin-example-repository/about/">About</a><a class="page-link" href="/fin-example-repository/accessing-the-ldp-server/">Accessing the LDP Server</a><a class="page-link" href="/fin-example-repository/adding-data/">Adding Data to the Repository</a><a class="page-link" href="/fin-example-repository/adding-your-first-user/">Adding Your First User</a><a class="page-link" href="/fin-example-repository/advanced-configuration/">Advanced Configuration</a><a class="page-link" href="/fin-example-repository/configuration/">Configuration</a><a class="page-link" href="/fin-example-repository/examples/ex1-pets/">Example 1 - Collaborator Pets</a><a class="page-link" href="/fin-example-repository/examples/ex2-photos/">Example 2 - Photographs</a><a class="page-link" href="/fin-example-repository/examples/ex3-sherry-lehmann/">Example 3 - Sherry Lehmann Collection</a><a class="page-link" href="/fin-example-repository/example-collections/">Example Collections</a><a class="page-link" href="/fin-example-repository/installation/">Installation</a><a class="page-link" href="/fin-example-repository/prerequisites/">Prerequisites</a></div>
      </nav>-->
  </div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Configuration</h1>
  </header>

  <div class="post-content">
    <p>The first step is to clone the repository, using:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/UCDavisLibrary/fin-example-repository.git
<span class="nb">cd </span>fin-example-repository          <span class="c"># change directory to your cloned location</span>
</code></pre></div></div>

<p>This will create a local copy of some example data and configurations for
testing the server. Looking around these files, you’ll see some configuration
files, some data and some metadata files mostly located within the collection
directory</p>

<p>The first thing we need to do is setup some environment variables for our first
setup. Look at the <code class="highlighter-rouge">fin-example.env</code> file. The file will look something like the file
below:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># server.env</span>
<span class="nv">FIN_URL</span><span class="o">=</span>http://localhost:3000
<span class="nv">FIN_ALLOW_ORIGINS</span><span class="o">=</span>mylibrary.org,localhost
<span class="nv">JWT_SECRET</span><span class="o">=</span>lax
<span class="nv">JWT_ISSUER</span><span class="o">=</span>mylibrary.org
<span class="nv">JWT_TTL</span><span class="o">=</span>36000
<span class="nv">JWT_VERBOSE</span><span class="o">=</span>1
</code></pre></div></div>

<ul>
  <li>
    <p><code class="highlighter-rouge">FIN_URL</code>  describes where the server will start.  By default we’ll start it
 on a localhost with a development port.  If would like to see your server
 from other locations, modify this to a publicly accessible location.  See the
 section below for running on default ports.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">FIN_ALLOW_ORIGINS</code> describes what domains can access your system.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">JWT_SECRET</code> is a secret used between servers to verify authentication. The
<code class="highlighter-rouge">JWT_SECRET</code> is used to sign jwt tokens. Computers with this secret can
very easily create tokens that would be accepted by the system, so it’s <strong>very
important</strong> to protect this secret in production environments.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">JWT_ISSUER</code> describes the service that issued the jwt token. While, it is checked by
the servers, is not a source of security.</p>
  </li>
</ul>

<p>If you are happy with this configuration, let’s go ahead and startup you system.
We are using docker-compose to startup the services described in our <code class="highlighter-rouge">fin.yml</code>
file.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-compose <span class="nt">-f</span> fin-example.yml up <span class="nt">-d</span>
</code></pre></div></div>

<p><em>Docker pros will notice we are avoiding using the standard location for the
<code class="highlighter-rouge">docker-compose.yml</code> file, and in addition we explicitly identify the
environment file in our setup. This is just to make it more clear what files are
being used.</em></p>

<p>This will take some time the first time, as multiple docker containers are
pulled to your computer from docker hub.  The next time you run this, it will go
much faster.  You can try that now, but turning your setup off and on.  It
should startup much faster.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-compose <span class="nt">-f</span> fin-example.yml down
docker-compose <span class="nt">-f</span> fin-example.yml up <span class="nt">-d</span>
</code></pre></div></div>

<p>At this point, you should be able to navigate the where you set <code class="highlighter-rouge">FIN_URL</code>, eg
<code class="highlighter-rouge">http://localhost:3000/</code> and you should see an empty repository.</p>

<p>Going back to your docker configuration, at this point you should be able to
examine the process that you are running, the logs, and other standard
docker-compose commands.  For example, if you look at all the containers you’ve
started with <code class="highlighter-rouge">docker-compose -f fin-example.yml ps</code>, you will see that there are
a number of services started, including a fedora instance, an IIIF server, and a
host of others.</p>

<p>Throughout these examples, we will also show direct access to the underlying LDP
as well. The default base for access to the LDP is /fcrepo/rest, so try
accessing <code class="highlighter-rouge">http://localhost:3000/fcrepo/rest</code>. This should fail, since by default
the public is not granted access to the data.  Since we want to read and write
data to this repository, let’s next create a new user for the system.</p>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/fin-example-repository/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Fin Example Repository Documentation</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Fin Example Repository Documentation</li><li><a class="u-email" href="mailto:library@ucdavis.edu">library@ucdavis.edu</a></li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/jekyll"><svg class="svg-icon"><use xlink:href="/fin-example-repository/assets/minima-social-icons.svg#github"></use></svg> <span class="username">jekyll</span></a></li><li><a href="https://www.twitter.com/jekyllrb"><svg class="svg-icon"><use xlink:href="/fin-example-repository/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">jekyllrb</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p>
      </div>
    </div>

  </div>

</footer>
</body>
</html>
